     1                                  ;Calcula el valor aproximado de PI
     2                                  ;Utiliza las series Gregory-Leibniz, para lograrlo.
     3                                  
     4                                  ;Objetivo: Calcular PI
     5                                  ;Entradas: -------
     6                                  ;Salidas: el valor aproximado de PI, con presicion de decimales
     7                                  
     8                                  section .bss
     9                                  
    10 00000000 <res 00000002>          denominador resw 1
    11 00000002 <res 00000002>          numerador resw 1
    12 00000004 <res 00000008>          PI resq 1
    13                                  
    14                                  section .data
    15                                  
    16                                  section .text
    17                                  	global _start
    18                                  _start:
    19 00000000 66C705[00000000]01-     	mov word [denominador],1
    20 00000008 00                 
    21 00000009 66C705[02000000]04-     	mov word [numerador],4
    22 00000011 00                 
    23 00000012 DF05[00000000]          	fild word [denominador] ;carga el nuevo denominador
    24 00000018 DE3D[02000000]          	fidivr word [numerador]	;divide el numerador entre el 
    25                                  								;denominador y lo guarda en el tope actual 
    26                                  								;de la pila
    27 0000001E 31C0                    	xor eax,eax				;Limpia el registro eax para alternar entre
    28                                  								;suma y resta
    29                                  								;0x00 -> resta || 0xFF -> suma
    30 00000020 31C9                    	xor ecx,ecx				;Limpia el ecx para llevar un contador de
    31                                  								;la cantidad de series que se realizan
    32                                  	
    33                                  incremento:
    34 00000022 BB[00000000]            	mov ebx,denominador		;copia direccion de denominador en ebx
    35 00000027 66830302                	add word [ebx],2		;suma 2 al valor de denominador
    36                                  actualizar:	
    37 0000002B DF05[00000000]          	fild word [denominador] ;carga el nuevo denominador
    38 00000031 DE3D[02000000]          	fidivr word [numerador]	;divide el numerador entre el 
    39                                  								;denominador y lo guarda en el tope actual 
    40                                  								;de la pila
    41                                  							
    42 00000037 83F800                  	cmp eax,0x00			;decide si lo que sigue es una suma
    43 0000003A 7509                    	jne suma					;o una resta
    44                                  resta:
    45 0000003C DEE9                    	fsubp ST1,ST0			;resta el valor del tope de la pila y lo 
    46                                  								;almacena en el valor anterior al tope
    47                                  								;y hace un pop a la pila
    48 0000003E 35FF000000              	xor eax,0xFF			;Cambia el valor del eax a 0xFF
    49 00000043 EB08                    	jmp continuar
    50                                  suma:
    51 00000045 DEC1                    	faddp ST1,ST0			;suma el valor del tope de la pila y lo 
    52                                  								;almacena en el valor anterior al tope
    53                                  								;y hace un pop a la pila
    54 00000047 35FF000000              	xor eax,0xFF			;Cambia el valor del eax a 0x00
    55 0000004C 41                      	inc ecx					;Incrementa el contador
    56                                  	
    57                                  continuar:
    58 0000004D 81F9E8030000            	cmp ecx,1000
    59 00000053 75CD                    	jne incremento
    60                                  	
    61                                  imprimir:
    62 00000055 DD15[04000000]          	fst qword [PI]
    63                                  
    64                                  salir:
    65 0000005B BB00000000              	mov ebx,0
    66 00000060 B801000000              	mov eax,1
    67 00000065 CD80                    	int 0x80
    68                                  	
